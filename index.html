<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom YouTube Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom CSS untuk menghilangkan scrollbar pada iframe */
        iframe {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        iframe::-webkit-scrollbar {
            display: none; /* Chrome/Safari */
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto p-4">
        <!-- Judul -->
        <h1 class="text-3xl font-bold text-center mb-6">Custom YouTube Player</h1>

        <!-- Input URL dan Tombol Cari -->
        <div class="max-w-2xl mx-auto mb-8 flex gap-2">
            <input
                type="text"
                id="video-url"
                placeholder="Tempelkan link YouTube di sini..."
                class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <button
                id="search-button"
                class="p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
                Cari
            </button>
        </div>

        <!-- Video Container -->
        <div id="video-container" class="aspect-w-16 aspect-h-9 bg-gray-800 rounded-lg overflow-hidden shadow-lg mb-4">
            <!-- Video akan muncul di sini -->
        </div>

        <!-- Detail Video -->
        <div id="video-details" class="bg-gray-800 p-4 rounded-lg shadow-lg hidden">
            <h2 id="video-title" class="text-xl font-bold mb-2"></h2>
            <p id="video-description" class="text-gray-400"></p>
            <p id="video-duration" class="text-gray-400 mt-2"></p>
        </div>

        <!-- Pesan Error -->
        <div id="error-message" class="text-red-500 text-center mt-4 hidden"></div>
    </div>

    <!-- YouTube IFrame Player API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        let videoId;

        // Fungsi untuk mengekstrak Video ID dari URL YouTube
        function extractVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        // Fungsi untuk memuat video
        function loadVideo() {
            const videoUrl = document.getElementById('video-url').value;
            videoId = extractVideoId(videoUrl);
            if (videoId) {
                if (player) {
                    player.loadVideoById(videoId);
                } else {
                    player = new YT.Player('video-container', {
                        height: '100%',
                        width: '100%',
                        videoId: videoId,
                        playerVars: {
                            autoplay: 1,
                            modestbranding: 1,
                            rel: 0,
                            controls: 1,
                            disablekb: 1,
                            fs: 0,
                            iv_load_policy: 3,
                            showinfo: 0
                        },
                        events: {
                            onReady: onPlayerReady,
                            onStateChange: onPlayerStateChange
                        }
                    });
                }
                fetchVideoDetails(videoId);
                document.getElementById('error-message').classList.add('hidden');
            } else {
                document.getElementById('error-message').textContent = "Link YouTube tidak valid. Pastikan link yang Anda masukkan benar.";
                document.getElementById('error-message').classList.remove('hidden');
            }
        }

        // Fungsi saat player siap
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // Fungsi untuk mengambil detail video dari YouTube Data API
        async function fetchVideoDetails(videoId) {
            const apiKey = 'YOUR_YOUTUBE_API_KEY'; // Ganti dengan API key Anda
            try {
                const response = await fetch(`https://www.googleapis.com/youtube/v3/videos?id=${videoId}&key=${apiKey}&part=snippet,contentDetails`);
                const data = await response.json();
                if (data.items && data.items.length > 0) {
                    const video = data.items[0];
                    const title = video.snippet.title;
                    const description = video.snippet.description;
                    const duration = video.contentDetails.duration;

                    // Tampilkan detail video
                    document.getElementById('video-title').textContent = title;
                    document.getElementById('video-description').textContent = description;
                    document.getElementById('video-duration').textContent = `Durasi: ${formatDuration(duration)}`;
                    document.getElementById('video-details').classList.remove('hidden');
                }
            } catch (error) {
                document.getElementById('error-message').textContent = "Gagal mengambil detail video. Pastikan API key valid.";
                document.getElementById('error-message').classList.remove('hidden');
            }
        }

        // Fungsi untuk memformat durasi video
        function formatDuration(duration) {
            const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
            const hours = (match[1] ? parseInt(match[1]) : 0);
            const minutes = (match[2] ? parseInt(match[2]) : 0);
            const seconds = (match[3] ? parseInt(match[3]) : 0);
            return `${hours > 0 ? hours + ':' : ''}${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        }

        // Event listener untuk tombol Cari
        document.getElementById('search-button').addEventListener('click', loadVideo);

        // Event listener untuk menekan Enter di input
        document.getElementById('video-url').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                loadVideo();
            }
        });
    </script>
</body>
</html>
